{% extends 'base.html' %}
{% block content %}
<h2>Your Cart</h2>

{% if cart_items %}
<table>
  <tr>
    <th>Product</th>
    <th>Price</th>
    <th>Quantity</th>
    <th>Subtotal</th>
    <th>Action</th>
  </tr>
  {% for item in cart_items %}
  <tr>
    <td>{{ item.product.name }}</td>
    <td>${{ "%.2f"|format(item.product.price) }}</td>
    <td>
      <form action="{{ url_for('main.add_to_cart', product_id=item.product.id) }}" method="POST" style="display:inline;">
        <input type="number" name="quantity" value="{{ item.quantity }}" min="1">
        <button type="submit">Update</button>
      </form>
    </td>
    <td>${{ "%.2f"|format(item.product.price * item.quantity) }}</td>
    <td>
      <form action="{{ url_for('main.remove_from_cart', item_id=item.id) }}" method="POST">
        <button type="submit">Remove</button>
      </form>
    </td>
  </tr>
  {% endfor %}
</table>

<p><strong>Total: ${{ "%.2f"|format(total) }}</strong></p>

<form action="{{ url_for('main.cart_clear') }}" method="POST">
  <button type="submit">Clear Cart</button>
</form>

{% else %}
<p>Your cart is empty.</p>
{% endif %}

{% endblock %}